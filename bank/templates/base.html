{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Corn Coin Exchange{% endblock %}</title>

    <!-- ✅ Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <!-- ✅ Custom CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
</head>  
    <body class="bg-light">

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="/">🌽 Corn Coin Exchange</a>
        <a class="navbar-brand" href="/mine/">⛏️ Mine</a>
        <a class="navbar-brand" href="/graph/">📈 Graph</a>
        <a class="navbar-brand" href="/bank-transfer/">🏦 Bank Transfer</a>
        <a class="navbar-brand" href="/news/">📰 News</a>
        <a class="navbar-brand" href="/dm/">💬 Direct Messages</a>
      </div>
    </nav>

    <div id="message-notification" class="alert alert-warning d-none">
    📩 You have unread messages from: <span id="unread-senders"></span>
</div>

<script>
function checkUnreadMessages() {
    fetch("/dm/unread/")
    .then(response => response.json())
    .then(data => {
        if (data.unread_count > 0) {
            document.getElementById("unread-senders").innerText = data.unread_senders.join(", ");
            document.getElementById("message-notification").classList.remove("d-none");
        } else {
            document.getElementById("message-notification").classList.add("d-none");
        }
    })
    .catch(error => console.error("Error fetching unread messages:", error));
}

// ✅ Run on page load and check every 5 seconds
document.addEventListener("DOMContentLoaded", checkUnreadMessages);
setInterval(checkUnreadMessages, 5000);
</script>

    {# <div class="container mt-4"> #}


            {% block content %} {% endblock %}

        {# </div> #}

    <footer class="text-center text-muted mt-4">
      <p>© 2025 Corn Coins Inc | Made by Ekansh Goenka</p>
    </footer>

    <!-- ✅ Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script> 
        {% block scripts %}{% endblock %}
        </script>
  </body>
</html>
